define(["jquery"],function(i){function o(r,e,t){if(!r||!r.length)throw new Error("field parameter must have a value");if(!e||!e.length)throw new Error("operator parameter must have a value");if(null==t)throw new Error("value parameter can't be null or undefined");this.field=r,this.operator=e,this.value=(r=t,i("<div/>").text(r).html().trim())}function e(){this._criteria=[]}return e.prototype.addOrUpdate=function(e){if(e instanceof o==!1)throw new Error("criterion must be instanceof Criterion",e);var r=this._criteria.findIndex(r=>r.field===e.field);-1<r?this._criteria[r]=e:this._criteria.push(e)},e.prototype.remove=function(e){if(!e||!e.length)throw new Error("field parameter must have a value");var r=this._criteria.findIndex(r=>r.field===e);-1<r&&this._criteria.splice(r,1)},e.prototype.getCriteria=function(){return[...this._criteria]},e.prototype.toJSON=function(){var r=[...this._criteria];return r.sort((r,e)=>r.field.localeCompare(e.field)),JSON.parse(JSON.stringify(r))},e.prototype.toUriComponent=function(){var r=this.toJSON();return btoa(JSON.stringify(r))},e.Criterion=o,e.clone=function(r){if(r instanceof e==!1)throw new Error("filter must be instanceof FilterConstructor",r);var t=r.getCriteria(),i=new e;for(let r=0,e=t.length;r<e;r++){var n=t[r];i.addOrUpdate(new o(n.field,n.operator,n.value))}return i},e.fromUriComponent=function(r){var t=JSON.parse(atob(r)),i=new e;for(let r=0,e=t.length;r<e;r++){var n=t[r];i.addOrUpdate(new o(n.field,n.operator,n.value))}return i},e});