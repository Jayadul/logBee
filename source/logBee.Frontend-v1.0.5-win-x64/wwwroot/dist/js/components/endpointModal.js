define(["logBee","jquery","ko","js/components/Modal","chart-js","luxon","js/chart-utils"],function(o,a,i,n,r,l,d){function t(t){t=a.extend(!0,{},s,t);var e=new n;e.events.on(n.EVENT_TYPES.build,function(t){var t=t.instance,e=t.getElement(),n=o.htmlDecode(e.find("[data-model]").html()),n=JSON.parse(n);n.endpoint.requestLog.applicationId=n.endpoint.applicationId,t._viewModel={endpoint:n.endpoint},i.applyBindings(t._viewModel,e[0]),e.find(".container-fluid").each(function(){a(this).children(".row").each(function(t,e){t%2==0&&a(this).addClass("bg-200")})}),e.find("[data-time-ago]").each(function(){o.timeAgoTag(a(this))}),t._endpointHttpTrafficChartData=function(t,e){for(var t=t.find("[data-endpoint-http-traffic-chart]"),n=[],o=0,a=e.intervals.length;o<a;o++)n.push(e.intervals[o].from);t=t[0].getContext("2d");return new r(t,{type:"line",options:{onResize:function(t,e){e=e.width;const o=600<=e?2:480<=e?3:4;t.options.scales.x.ticks.callback=function(t,e,n){return(t+1)%o!=0?null:(t=this.getLabelForValue(t),l.DateTime.fromISO(t).toFormat("dd-MM"))}},responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{intersect:!1,mode:"index",callbacks:{title:function(t,e){t=t[0].label;return l.DateTime.fromISO(t).toFormat("dd MMMM")}}},verticalLiner:{lineWidth:3,color:"#282c34"}},scales:{y:{beginAtZero:!0,position:"right"},x:{ticks:{}}},elements:{point:{radius:0},line:{borderWidth:2}}},plugins:[d.verticalLinerPlugin],data:{labels:n,datasets:[{label:"Server errors",fill:!0,backgroundColor:d.statusCode500BackgroundGradient(t,100),borderColor:d.statusCode500BorderColor(),data:e.intervals.map(function(n){let o=0;for(let t=0,e=n.value.length;t<e;t++)500<=n.value[t].httpStatusCode&&(o+=n.value[t].count);return o})},{label:"Client errors",fill:!0,backgroundColor:d.statusCode400BackgroundGradient(t,100),borderColor:d.statusCode400BorderColor(),data:e.intervals.map(function(n){let o=0;for(let t=0,e=n.value.length;t<e;t++)400<=n.value[t].httpStatusCode&&n.value[t].httpStatusCode<500&&(o+=n.value[t].count);return o})},{label:"Success",fill:!0,backgroundColor:d.statusCode200BackgroundGradient(t,100),borderColor:d.statusCode200BorderColor(),data:e.intervals.map(function(n){let o=0;for(let t=0,e=n.value.length;t<e;t++)n.value[t].httpStatusCode<400&&(o+=n.value[t].count);return o})}]}})}(e,n.endpointHttpTrafficChartData)}),e.events.on(n.EVENT_TYPES.destroy,function(t){var e=t.instance.getElement();t.instance._endpointHttpTrafficChartData&&t.instance._endpointHttpTrafficChartData.destroy(),i.disposeKoViewModel(t.instance._viewModel,e)}),e.load("/Components/EndpointModal",{applicationId:t.applicationId,httpMethod:t.httpMethod,tokenizedPath:t.tokenizedPath})}const s={applicationId:"",httpMethod:"",tokenizedPath:""};return new function(){this.open=t}});