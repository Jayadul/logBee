define(["jquery","Emitter","js/visitorCookie"],function(i,n,e){function o(n){var t,a=l.children(`[data-id='${n}']`);a.length&&(t=a.text().trim(),l.children("[data-organization]").removeClass("active"),a.addClass("active"),g.text(t),d.emit(r.organizationChanged,{id:n,name:t}))}const d=new n.default,r={organizationChanged:"organizationChanged"},g=i("#organizationsMenu").closest(".dropdown").children(".dropdown-toggle"),l=i("#organizationsMenu");let c=function(n){l.on("click","[data-organization]",function(n){n.preventDefault();n=i(this).attr("data-id");o(n)}),d.on(r.organizationChanged,function(n){e.setOrganizationId(n.id)});let t=n||e.getOrganizationId(),a=null;t&&(a=l.children(`[data-id='${t}']`)),(t=a&&a.length?t:l.children("[data-organization]").eq(0).attr("data-id"))&&o(t),g.removeClass("d-none"),c=function(){}};return{events:d,EVENT_TYPES:r,init:function(n){l.on("click","[data-organization]",function(n){n.preventDefault();n=i(this).attr("data-id");o(n)}),d.on(r.organizationChanged,function(n){e.setOrganizationId(n.id)});let t=n||e.getOrganizationId(),a=null;t&&(a=l.children(`[data-id='${t}']`)),(t=a&&a.length?t:l.children("[data-organization]").eq(0).attr("data-id"))&&o(t),g.removeClass("d-none"),c=function(){}}}});