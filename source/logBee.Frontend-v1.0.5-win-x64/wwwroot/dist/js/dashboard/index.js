define(["logBee","jquery","ko","js/dashboard/dashboardNavMenu","js/dashboard/ApplicationCard"],function(n,o,e,t,i){t.events.on(t.EVENT_TYPES.organizationChanged,function(a){r(a)});const r=function(a){s.organization(a),o.get("/Dashboard/LoadApplications",{organizationId:a.id}).done(function(a){a.toast&&n.showToast(a.toast,a.toast.options),d(a.applications),a.organizationUsage&&s.organizationUsage({organization:a.organization,usage:a.organizationUsage})}).fail(function(a){n.showXhrErrorToast(a,!0)})},a=o("#content").children("[data-container]");let l=[];const d=function(o){a.removeClass("d-none");for(let a=0,n=l.length;a<n;a++)l[a].destroy();for(let a=l.length=0,n=o.length;a<n;a++)o[a].wasApplicationDataPreloaded=e.observable(o[a].wasApplicationDataPreloaded),o[a].preloadedData=e.observable(o[a].preloadedData);s.applications(o);for(let a=0,n=o.length;a<n;a++){var t=new i({dashboardApplication:o[a]});l.push(t)}},s={organization:e.observable(null),organizationUsage:e.observable(null),applications:e.observableArray(),applicationCardTemplateName:function(a){return a.wasApplicationDataPreloaded()?a.preloadedData()?"dashboard-applicationCard-seen-template":"dashboard-applicationCard-notSeen-template":"dashboard-applicationCard-notLoaded-template"}},p={preselectedOrganizationId:null};return{init:function(a){a=o.extend(!0,{},p,a),e.applyBindings(s,document.getElementById("content")),o("#content").on("click","[data-create-application-button]",function(a){a.preventDefault(),require(["js/account/createApplicationModal"],function(a){a.open()})}),t.init(a.preselectedOrganizationId)}}});